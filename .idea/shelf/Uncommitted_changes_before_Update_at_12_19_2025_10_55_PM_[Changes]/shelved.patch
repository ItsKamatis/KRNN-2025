Index: src/utils/generate_report.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import matplotlib.pyplot as plt\r\nimport numpy as np\r\nimport pandas as pd\r\nimport os\r\nimport logging\r\nfrom scipy import stats\r\n\r\nlogger = logging.getLogger(__name__)\r\n\r\n\r\nclass ReportGenerator:\r\n    \"\"\"\r\n    Generates visual and text evidence for the KRNN Risk Pipeline.\r\n    \"\"\"\r\n\r\n    def __init__(self, output_dir=\"./reports\"):\r\n        self.output_dir = output_dir\r\n        os.makedirs(output_dir, exist_ok=True)\r\n        try:\r\n            import seaborn as sns\r\n            sns.set_theme(style=\"whitegrid\")\r\n        except ImportError:\r\n            pass\r\n\r\n    def plot_regime_clustering(self, mus, sigmas):\r\n        \"\"\"Visual Evidence of 'Mean Collapse'.\"\"\"\r\n        plt.figure(figsize=(10, 6))\r\n        plt.scatter(mus, sigmas, alpha=0.6, edgecolors='w', s=50)\r\n\r\n        mu_mean = np.mean(mus)\r\n        sigma_mean = np.mean(sigmas)\r\n\r\n        plt.axvline(mu_mean, color='r', linestyle='--', alpha=0.5, label=f'Avg Mu: {mu_mean:.4f}')\r\n        plt.axhline(sigma_mean, color='g', linestyle='--', alpha=0.5, label=f'Avg Vol: {sigma_mean:.4f}')\r\n\r\n        plt.title(\"Evidence of Regime Identification (Mean Collapse)\")\r\n        plt.xlabel(\"Predicted Mean Return (Mu)\")\r\n        plt.ylabel(\"Predicted Volatility (Sigma)\")\r\n        plt.legend()\r\n        plt.tight_layout()\r\n\r\n        save_path = os.path.join(self.output_dir, \"1_regime_clustering.png\")\r\n        plt.savefig(save_path)\r\n        plt.close()\r\n\r\n    def plot_tail_comparison(self, tail_data):\r\n        \"\"\"Visual Evidence of Risk Differentiation.\"\"\"\r\n        sorted_tickers = sorted(tail_data.keys(), key=lambda k: tail_data[k]['gamma'])\r\n        safe_ticker = sorted_tickers[0]\r\n        risky_ticker = sorted_tickers[-1]\r\n\r\n        safe_gamma = tail_data[safe_ticker]['gamma']\r\n        risky_gamma = tail_data[risky_ticker]['gamma']\r\n\r\n        safe_resid = tail_data[safe_ticker]['residuals']\r\n        risky_resid = tail_data[risky_ticker]['residuals']\r\n\r\n        plt.figure(figsize=(12, 6))\r\n        plt.hist(safe_resid, bins=50, density=True, alpha=0.5, label=f\"{safe_ticker} (Gamma={safe_gamma:.2f})\",\r\n                 color='blue')\r\n        plt.hist(risky_resid, bins=50, density=True, alpha=0.5, label=f\"{risky_ticker} (Gamma={risky_gamma:.2f})\",\r\n                 color='red')\r\n\r\n        plt.title(f\"Tail Risk Differentiation: {safe_ticker} vs {risky_ticker}\")\r\n        plt.xlabel(\"Standardized Residuals (Z-Scores)\")\r\n        plt.ylabel(\"Density\")\r\n        plt.legend()\r\n        plt.xlim(-5, 5)\r\n        plt.figtext(0.15, 0.8, \"Note: Higher Gamma implies fatter left tail (Crash Risk)\", fontsize=10)\r\n\r\n        save_path = os.path.join(self.output_dir, \"2_tail_differentiation.png\")\r\n        plt.savefig(save_path)\r\n        plt.close()\r\n\r\n    def plot_allocation_vs_risk(self, tickers, weights, gammas):\r\n        \"\"\"Visual Evidence of Optimization Logic.\"\"\"\r\n        df = pd.DataFrame({'Ticker': tickers, 'Weight': weights, 'Gamma': gammas})\r\n\r\n        plt.figure(figsize=(10, 6))\r\n        plt.scatter(df['Gamma'], df['Weight'], s=100, c=df['Weight'], cmap='viridis')\r\n\r\n        for i, row in df.iterrows():\r\n            plt.text(row['Gamma'], row['Weight'], row['Ticker'], fontsize=9)\r\n\r\n        if len(df) > 1:\r\n            z = np.polyfit(df['Gamma'], df['Weight'], 1)\r\n            p = np.poly1d(z)\r\n            plt.plot(df['Gamma'], p(df['Gamma']), \"r--\", alpha=0.5, label=\"Trend (Higher Risk -> Lower Weight)\")\r\n\r\n        plt.title(\"Optimization Logic: Impact of Tail Risk on Capital Allocation\")\r\n        plt.xlabel(\"Tail Index (Gamma)\")\r\n        plt.ylabel(\"Optimal Portfolio Weight\")\r\n        plt.legend()\r\n        plt.grid(True, alpha=0.3)\r\n\r\n        save_path = os.path.join(self.output_dir, \"3_allocation_logic.png\")\r\n        plt.savefig(save_path)\r\n        plt.close()\r\n\r\n    def generate_diagnostics(self, preds, targets):\r\n        \"\"\"Out-of-Sample Performance Visualization.\"\"\"\r\n        # R-Squared\r\n        ss_res = np.sum((targets - preds) ** 2)\r\n        ss_tot = np.sum((targets - np.mean(targets)) ** 2)\r\n        r2 = 1 - (ss_res / ss_tot)\r\n\r\n        plt.figure(figsize=(10, 6))\r\n        plt.scatter(targets, preds, alpha=0.1)\r\n        min_val = min(targets.min(), preds.min())\r\n        max_val = max(targets.max(), preds.max())\r\n        plt.plot([min_val, max_val], [min_val, max_val], 'r--', label=\"Perfect Prediction\")\r\n\r\n        plt.title(f\"Prediction Accuracy (Test Set R2: {r2:.4f})\")\r\n        plt.xlabel(\"Actual Return\")\r\n        plt.ylabel(\"Predicted Return\")\r\n        plt.legend()\r\n\r\n        save_path = os.path.join(self.output_dir, \"4_prediction_accuracy.png\")\r\n        plt.savefig(save_path)\r\n        plt.close()\r\n        return r2\r\n\r\n    def save_comprehensive_report(self, candidates, portfolio, opt_metrics, test_metrics):\r\n        \"\"\"Saves all numerical data to a text file.\"\"\"\r\n        path = os.path.join(self.output_dir, \"comprehensive_summary.txt\")\r\n        with open(path, \"w\") as f:\r\n            f.write(\"=== KRNN RISK MANAGEMENT PIPELINE REPORT ===\\n\")\r\n            f.write(\"============================================\\n\\n\")\r\n\r\n            f.write(\"--- PHASE 3: SYSTEMATIC SELECTION (TOP CANDIDATES) ---\\n\")\r\n            f.write(\"Note: 'Mu' and 'Sigma' are daily predictions from the Neural Net.\\n\")\r\n            f.write(\"      'Gamma' is the Tail Index from EVT (Higher = Riskier).\\n\\n\")\r\n            f.write(f\"{'Ticker':<8} {'Mu (%)':<10} {'Sigma (%)':<10} {'Gamma':<10} {'ES 99% (Z)':<12}\\n\")\r\n            f.write(\"-\" * 60 + \"\\n\")\r\n            for c in candidates:\r\n                f.write(\r\n                    f\"{c['Ticker']:<8} {c['Mu'] * 100:<10.4f} {c['Sigma'] * 100:<10.4f} {c['Gamma']:<10.4f} {c['ES']:<12.4f}\\n\")\r\n            f.write(\"\\n\")\r\n\r\n            f.write(\"--- PHASE 4: OPTIMIZATION RESULTS ---\\n\")\r\n            f.write(f\"Objective: Minimize CVaR (95%)\\n\")\r\n            f.write(f\"Target Daily Return: > {opt_metrics.get('Target_Ret', 0) * 100:.4f}%\\n\")\r\n            f.write(f\"Optimized Portfolio CVaR: {opt_metrics.get('CVaR', 0):.4f}\\n\\n\")\r\n            f.write(\"Final Portfolio Allocation:\\n\")\r\n            f.write(f\"{'Ticker':<8} {'Weight (%)':<12} {'Tail Risk (Gamma)':<20}\\n\")\r\n            f.write(\"-\" * 50 + \"\\n\")\r\n            # Combine portfolio data for writing\r\n            # portfolio is list of dicts: {'Ticker': t, 'Weight': w, 'Gamma': g}\r\n            for p in portfolio:\r\n                f.write(f\"{p['Ticker']:<8} {p['Weight'] * 100:<12.2f} {p['Gamma']:<20.4f}\\n\")\r\n            f.write(\"\\n\")\r\n\r\n            f.write(\"--- PHASE 5: OUT-OF-SAMPLE DIAGNOSTICS (2024+) ---\\n\")\r\n            f.write(f\"Test Set R-Squared: {test_metrics.get('R2', 0):.4f}\\n\")\r\n            f.write(f\"Cumulative Market Return:   {test_metrics.get('Market_Cum', 0) * 100:.2f}%\\n\")\r\n            f.write(f\"Cumulative Strategy Return: {test_metrics.get('Strategy_Cum', 0) * 100:.2f}%\\n\")\r\n\r\n        logger.info(f\"Saved comprehensive text report to {path}\")
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/utils/generate_report.py b/src/utils/generate_report.py
--- a/src/utils/generate_report.py	(revision 329547708e54be771f49b01ee5ffae475180e260)
+++ b/src/utils/generate_report.py	(date 1766120185939)
@@ -43,6 +43,25 @@
         plt.savefig(save_path)
         plt.close()
 
+    def plot_qq_residuals(self, residuals, ticker_name):
+        """
+        Generates a Q-Q plot to visually confirm non-normality.
+        """
+        plt.figure(figsize=(10, 6))
+
+        # Compare residuals against Standard Normal
+        stats.probplot(residuals, dist="norm", plot=plt)
+
+        plt.title(f"Q-Q Plot: {ticker_name} Residuals vs Normal Distribution")
+        plt.xlabel("Theoretical Quantiles (Gaussian)")
+        plt.ylabel("Observed Quantiles (Standardized Residuals)")
+        plt.grid(True, alpha=0.3)
+
+        save_path = os.path.join(self.output_dir, f"qq_{ticker_name}.png")
+        plt.savefig(save_path)
+        plt.close()
+        logger.info(f"Saved Q-Q plot for {ticker_name} to {save_path}")
+
     def plot_tail_comparison(self, tail_data):
         """Visual Evidence of Risk Differentiation."""
         sorted_tickers = sorted(tail_data.keys(), key=lambda k: tail_data[k]['gamma'])
Index: main_pipeline.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import torch\r\nimport numpy as np\r\nimport pandas as pd\r\nimport yaml\r\nimport logging\r\nimport random\r\nimport os\r\nfrom torch.utils.data import DataLoader\r\nfrom pathlib import Path\r\n\r\n# Import our custom modules\r\nfrom src.data.data_collector_v5 import DataCollector\r\nfrom src.data.dataset_v5 import DataModule, DataConfig, StockDataset\r\nfrom src.model.krnn_v5 import KRNNRegressor, ModelConfig\r\nfrom src.utils.trainer_v5 import Trainer\r\nfrom src.risk.evt import EVTEngine\r\nfrom src.portfolio.optimizer import MeanCVaROptimizer\r\nfrom src.utils.generate_report import ReportGenerator\r\n\r\n# Setup logging\r\nlogging.basicConfig(level=logging.INFO)\r\nlogger = logging.getLogger(__name__)\r\n\r\n\r\ndef set_seed(seed=42):\r\n    \"\"\"Ensures reproducibility across the entire pipeline.\"\"\"\r\n    random.seed(seed)\r\n    os.environ['PYTHONHASHSEED'] = str(seed)\r\n    np.random.seed(seed)\r\n    torch.manual_seed(seed)\r\n    torch.cuda.manual_seed(seed)\r\n    torch.cuda.manual_seed_all(seed)\r\n    torch.backends.cudnn.deterministic = True\r\n    torch.backends.cudnn.benchmark = False\r\n    logger.info(f\"Global Seed set to {seed}\")\r\n\r\n\r\ndef initialize_data_pipeline(config_path: str = \"config_v5.yaml\"):\r\n    with open(config_path) as f:\r\n        config = yaml.safe_load(f)\r\n    data_dir = Path(config['paths']['data'])\r\n    required_files = ['train.parquet', 'validation.parquet', 'test.parquet']\r\n\r\n    if all((data_dir / f).exists() for f in required_files):\r\n        logger.info(\"Data files found. Skipping download.\")\r\n        return config\r\n\r\n    logger.info(\"Data files missing. Starting Data Collection...\")\r\n    collector = DataCollector(config)\r\n    collector.collect_data(start_date=config['data']['train_start'])\r\n    return config\r\n\r\n\r\ndef run_project_pipeline():\r\n    # --- Step 0: Robustness & Init ---\r\n    set_seed(42)\r\n    print(\"\\n[Phase 0] Initializing Pipeline & Checking Data...\")\r\n    config_dict = initialize_data_pipeline(\"config_v5.yaml\")\r\n    reporter = ReportGenerator(output_dir=\"./reports\")\r\n\r\n    # --- Step 1: Data Loading ---\r\n    print(\"\\n[Phase 1] Loading Data Module (RAM Cache)...\")\r\n    data_config = DataConfig(\r\n        sequence_length=config_dict['data']['window_size'],\r\n        batch_size=config_dict['data']['batch_size']\r\n    )\r\n    data_module = DataModule(data_config)\r\n    data_module.setup(Path(config_dict['paths']['data']))\r\n    dataloaders = data_module.get_dataloaders()\r\n\r\n    # --- Step 2: Model Training ---\r\n    print(\"\\n[Phase 2] Training K-Parallel KRNN (Heteroscedastic)...\")\r\n    feature_dim = len(data_module.train_dataset.feature_cols)\r\n    model_config = ModelConfig(\r\n        input_dim=feature_dim,\r\n        hidden_dim=config_dict['model']['hidden_dim'],\r\n        k_dups=3,\r\n        output_dim=2,  # Mu and Sigma\r\n        dropout=config_dict['model']['dropout'],\r\n        device=\"cuda\" if torch.cuda.is_available() else \"cpu\"\r\n    )\r\n    model = KRNNRegressor(model_config)\r\n    trainer = Trainer(model, config=config_dict)\r\n\r\n    # Train\r\n    training_metrics = trainer.train(\r\n        train_loader=dataloaders['train'],\r\n        val_loader=dataloaders['val']\r\n    )\r\n    print(f\"Training Complete. Final Val GNLL: {training_metrics.get('loss', 'N/A')}\")\r\n\r\n    # --- Step 3: The Systematic Funnel ---\r\n    print(\"\\n[Phase 3] Running Systematic Portfolio Selection...\")\r\n\r\n    val_df_path = Path(config_dict['paths']['data']) / 'validation.parquet'\r\n    val_df = pd.read_parquet(val_df_path)\r\n    all_tickers = val_df['Ticker'].unique()\r\n    print(f\"1. Universe Scan: Found {len(all_tickers)} tickers.\")\r\n\r\n    print(\"2. Alpha Filter: Ranking assets by Predicted Return...\")\r\n    candidates = []\r\n\r\n    # Configs\r\n    top_n = config_dict.get('portfolio', {}).get('top_n_assets', 10)\r\n    risk_conf = config_dict.get('portfolio', {}).get('risk_confidence', 0.95)\r\n    n_sims = config_dict.get('portfolio', {}).get('n_simulations', 1000)\r\n\r\n    model.eval()\r\n\r\n    all_regime_mus = []\r\n    all_regime_sigmas = []\r\n\r\n    for ticker in all_tickers:\r\n        ticker_df = val_df[val_df['Ticker'] == ticker].copy()\r\n        if len(ticker_df) < data_config.sequence_length + 20:\r\n            continue\r\n\r\n        ticker_ds = StockDataset(ticker_df, data_config.sequence_length)\r\n        ticker_loader = DataLoader(ticker_ds, batch_size=64, shuffle=False)\r\n\r\n        mus = []\r\n        sigmas = []\r\n        targets = []\r\n        with torch.no_grad():\r\n            for feat, targ in ticker_loader:\r\n                feat = feat.to(model_config.device)\r\n                mu, sigma = model(feat)\r\n                mus.append(mu.cpu().numpy())\r\n                sigmas.append(sigma.cpu().numpy())\r\n                targets.append(targ.cpu().numpy())\r\n\r\n        mus = np.concatenate(mus)\r\n        sigmas = np.concatenate(sigmas)\r\n        targets = np.concatenate(targets)\r\n\r\n        avg_pred_return = np.mean(mus)\r\n        avg_pred_volatility = np.mean(sigmas)\r\n\r\n        all_regime_mus.append(avg_pred_return)\r\n        all_regime_sigmas.append(avg_pred_volatility)\r\n\r\n        residuals = (targets.flatten() - mus.flatten()) / sigmas.flatten()\r\n\r\n        candidates.append({\r\n            'Ticker': ticker,\r\n            'Pred_Return': avg_pred_return,\r\n            'Pred_Vol': avg_pred_volatility,\r\n            'Residuals': residuals\r\n        })\r\n\r\n    reporter.plot_regime_clustering(all_regime_mus, all_regime_sigmas)\r\n\r\n    candidates.sort(key=lambda x: x['Pred_Return'], reverse=True)\r\n    top_candidates = candidates[:top_n]\r\n\r\n    print(f\"   Selected Top {len(top_candidates)} Candidates.\")\r\n\r\n    print(f\"\\n3. Risk Filter: Analyzing Heavy Tails (Gamma of Z-scores)...\")\r\n\r\n    scenarios_list = []\r\n    final_tickers = []\r\n    expected_returns_vec = []\r\n    evt_engine = EVTEngine(tail_fraction=0.10)\r\n\r\n    tail_data = {}\r\n\r\n    # Data for Report\r\n    candidates_report_data = []\r\n\r\n    for cand in top_candidates:\r\n        ticker = cand['Ticker']\r\n        evt_params = evt_engine.analyze_tails(cand['Residuals'])\r\n        gamma = evt_params['gamma']\r\n\r\n        tail_data[ticker] = {\r\n            'gamma': gamma,\r\n            'residuals': cand['Residuals']\r\n        }\r\n\r\n        scenarios = evt_engine.generate_scenarios(\r\n            n_simulations=n_sims,\r\n            gamma=gamma,\r\n            volatility=cand['Pred_Vol'],\r\n            expected_return=cand['Pred_Return']\r\n        )\r\n\r\n        scenarios_list.append(scenarios)\r\n        final_tickers.append(ticker)\r\n        expected_returns_vec.append(cand['Pred_Return'])\r\n\r\n        # Calculate ES for Report\r\n        risk_metrics = evt_engine.calculate_risk_metrics(evt_params)\r\n\r\n        candidates_report_data.append({\r\n            'Ticker': ticker,\r\n            'Mu': cand['Pred_Return'],\r\n            'Sigma': cand['Pred_Vol'],\r\n            'Gamma': gamma,\r\n            'ES': risk_metrics['ES_0.99']\r\n        })\r\n\r\n        print(f\"   - {ticker}: Gamma={gamma:.4f}\")\r\n\r\n    reporter.plot_tail_comparison(tail_data)\r\n\r\n    print(\"\\n4. Optimization: Minimizing Portfolio CVaR...\")\r\n\r\n    portfolio_report_data = []\r\n    opt_metrics = {}\r\n\r\n    if len(scenarios_list) > 1:\r\n        scenarios_matrix = np.column_stack(scenarios_list)\r\n        expected_returns_vec = np.array(expected_returns_vec)\r\n\r\n        optimizer = MeanCVaROptimizer(confidence_level=risk_conf)\r\n        target_ret = np.mean(expected_returns_vec) * config_dict.get('portfolio', {}).get('target_return_factor', 0.8)\r\n\r\n        result = optimizer.optimize(expected_returns_vec, scenarios_matrix, target_ret)\r\n\r\n        if result:\r\n            final_weights = result['weights']\r\n            opt_metrics['Target_Ret'] = target_ret\r\n            opt_metrics['CVaR'] = result['CVaR_Optimal']\r\n\r\n            print(\"\\n=== FINAL HETEROSCEDASTIC PORTFOLIO ===\")\r\n            allocations = sorted(zip(final_tickers, final_weights), key=lambda x: x[1], reverse=True)\r\n            for ticker, weight in allocations:\r\n                if weight > 0.001:\r\n                    print(f\"{ticker:<6}: {weight * 100:.2f}%\")\r\n\r\n                # Store for Report\r\n                portfolio_report_data.append({\r\n                    'Ticker': ticker,\r\n                    'Weight': weight,\r\n                    'Gamma': tail_data[ticker]['gamma']\r\n                })\r\n\r\n            # Use original unsorted lists for plotting alignment\r\n            gammas = [tail_data[t]['gamma'] for t in final_tickers]\r\n            reporter.plot_allocation_vs_risk(final_tickers, final_weights, gammas)\r\n\r\n        else:\r\n            print(\"Optimizer failed.\")\r\n\r\n    # --- Phase 4: Evaluation & Diagnostics ---\r\n    print(\"\\n[Phase 4] Out-of-Sample Evaluation...\")\r\n\r\n    test_loader = dataloaders['test']\r\n    model.eval()\r\n\r\n    all_mus = []\r\n    all_targets = []\r\n\r\n    with torch.no_grad():\r\n        for feat, targ in test_loader:\r\n            feat = feat.to(model_config.device)\r\n            mu, sigma = model(feat)\r\n            all_mus.append(mu.cpu().numpy())\r\n            all_targets.append(targ.cpu().numpy().flatten())\r\n\r\n    all_mus = np.concatenate(all_mus)\r\n    all_targets = np.concatenate(all_targets)\r\n\r\n    # Run Diagnostics and get R2\r\n    r2 = reporter.generate_diagnostics(all_mus, all_targets)\r\n\r\n    # Calculate Cumulative Returns for Report\r\n    cum_market = np.cumsum(all_targets)\r\n    cum_strategy = np.cumsum(np.where(all_mus > 0, all_targets, 0))  # Simple Long-Only Logic\r\n\r\n    test_metrics = {\r\n        'R2': r2,\r\n        'Market_Cum': cum_market[-1],\r\n        'Strategy_Cum': cum_strategy[-1]\r\n    }\r\n\r\n    # SAVE ALL TEXT DATA\r\n    reporter.save_comprehensive_report(\r\n        candidates=candidates_report_data,\r\n        portfolio=portfolio_report_data,\r\n        opt_metrics=opt_metrics,\r\n        test_metrics=test_metrics\r\n    )\r\n\r\n    print(f\"\\nPipeline Complete. Reports generated in {reporter.output_dir}\")\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    run_project_pipeline()
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/main_pipeline.py b/main_pipeline.py
--- a/main_pipeline.py	(revision 329547708e54be771f49b01ee5ffae475180e260)
+++ b/main_pipeline.py	(date 1766120185953)
@@ -53,7 +53,7 @@
 
 def run_project_pipeline():
     # --- Step 0: Robustness & Init ---
-    set_seed(42)
+    set_seed()
     print("\n[Phase 0] Initializing Pipeline & Checking Data...")
     config_dict = initialize_data_pipeline("config_v5.yaml")
     reporter = ReportGenerator(output_dir="./reports")
Index: .idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"AutoImportSettings\">\r\n    <option name=\"autoReloadType\" value=\"SELECTIVE\" />\r\n  </component>\r\n  <component name=\"ChangeListManager\">\r\n    <list default=\"true\" id=\"85089f33-9993-4c98-ac18-4c5ff11dcd04\" name=\"Changes\" comment=\"Rigor Success\">\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/workspace.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/main_pipeline.py\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/main_pipeline.py\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/utils/generate_report.py\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/utils/generate_report.py\" afterDir=\"false\" />\r\n    </list>\r\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\r\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\r\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\r\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\r\n  </component>\r\n  <component name=\"FileTemplateManagerImpl\">\r\n    <option name=\"RECENT_TEMPLATES\">\r\n      <list>\r\n        <option value=\"Python Script\" />\r\n      </list>\r\n    </option>\r\n  </component>\r\n  <component name=\"Git.Settings\">\r\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$\" />\r\n  </component>\r\n  <component name=\"GitHubPullRequestSearchHistory\">{\r\n  &quot;lastFilter&quot;: {\r\n    &quot;state&quot;: &quot;OPEN&quot;,\r\n    &quot;assignee&quot;: &quot;ItsKamatis&quot;\r\n  }\r\n}</component>\r\n  <component name=\"GithubPullRequestsUISettings\">{\r\n  &quot;selectedUrlAndAccountId&quot;: {\r\n    &quot;url&quot;: &quot;https://github.com/ItsKamatis/KRNN_V5.git&quot;,\r\n    &quot;accountId&quot;: &quot;36c0120a-5724-4140-8e17-9de1d6fcb06a&quot;\r\n  }\r\n}</component>\r\n  <component name=\"McpProjectServerCommands\">\r\n    <commands />\r\n    <urls />\r\n  </component>\r\n  <component name=\"ProjectColorInfo\">{\r\n  &quot;associatedIndex&quot;: 2\r\n}</component>\r\n  <component name=\"ProjectId\" id=\"2oJ89tBQOW1MFAIcfJVieKbPoRy\" />\r\n  <component name=\"ProjectViewState\">\r\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\r\n    <option name=\"showLibraryContents\" value=\"true\" />\r\n  </component>\r\n  <component name=\"PropertiesComponent\"><![CDATA[{\r\n  \"keyToString\": {\r\n    \"Python.data_collector_v5.executor\": \"Run\",\r\n    \"Python.generate_report.executor\": \"Run\",\r\n    \"Python.main_pipeline.executor\": \"Run\",\r\n    \"RunOnceActivity.MCP Project settings loaded\": \"true\",\r\n    \"RunOnceActivity.ShowReadmeOnStart\": \"true\",\r\n    \"RunOnceActivity.TerminalTabsStorage.copyFrom.TerminalArrangementManager.252\": \"true\",\r\n    \"RunOnceActivity.git.unshallow\": \"true\",\r\n    \"RunOnceActivity.typescript.service.memoryLimit.init\": \"true\",\r\n    \"ai.playground.ignore.import.keys.banner.in.settings\": \"true\",\r\n    \"com.intellij.ml.llm.matterhorn.ej.ui.settings.DefaultModelSelectionForGA.v1\": \"true\",\r\n    \"git-widget-placeholder\": \"master\",\r\n    \"ignore.virus.scanning.warn.message\": \"true\",\r\n    \"junie.onboarding.icon.badge.shown\": \"true\",\r\n    \"last_opened_file_path\": \"D:/Program Files/Python/python.exe\",\r\n    \"node.js.detected.package.eslint\": \"true\",\r\n    \"node.js.detected.package.tslint\": \"true\",\r\n    \"node.js.selected.package.eslint\": \"(autodetect)\",\r\n    \"node.js.selected.package.tslint\": \"(autodetect)\",\r\n    \"nodejs_package_manager_path\": \"npm\",\r\n    \"settings.editor.selected.configurable\": \"com.jetbrains.python.configuration.PyActiveSdkModuleConfigurable\",\r\n    \"to.speed.mode.migration.done\": \"true\",\r\n    \"vue.rearranger.settings.migration\": \"true\"\r\n  }\r\n}]]></component>\r\n  <component name=\"RecentsManager\">\r\n    <key name=\"MoveFile.RECENT_KEYS\">\r\n      <recent name=\"D:\\PyCharm Projects\\KRNN_V5\" />\r\n    </key>\r\n  </component>\r\n  <component name=\"RunManager\">\r\n    <configuration name=\"data_collector_v5\" type=\"PythonConfigurationType\" factoryName=\"Python\" temporary=\"true\" nameIsGenerated=\"true\">\r\n      <module name=\"KRNN_V5\" />\r\n      <option name=\"ENV_FILES\" value=\"\" />\r\n      <option name=\"INTERPRETER_OPTIONS\" value=\"\" />\r\n      <option name=\"PARENT_ENVS\" value=\"true\" />\r\n      <envs>\r\n        <env name=\"PYTHONUNBUFFERED\" value=\"1\" />\r\n      </envs>\r\n      <option name=\"SDK_HOME\" value=\"\" />\r\n      <option name=\"WORKING_DIRECTORY\" value=\"$PROJECT_DIR$/src/data\" />\r\n      <option name=\"IS_MODULE_SDK\" value=\"true\" />\r\n      <option name=\"ADD_CONTENT_ROOTS\" value=\"true\" />\r\n      <option name=\"ADD_SOURCE_ROOTS\" value=\"true\" />\r\n      <EXTENSION ID=\"PythonCoverageRunConfigurationExtension\" runner=\"coverage.py\" />\r\n      <option name=\"RUN_TOOL\" value=\"\" />\r\n      <option name=\"SCRIPT_NAME\" value=\"$PROJECT_DIR$/src/data/data_collector_v5.py\" />\r\n      <option name=\"PARAMETERS\" value=\"\" />\r\n      <option name=\"SHOW_COMMAND_LINE\" value=\"false\" />\r\n      <option name=\"EMULATE_TERMINAL\" value=\"false\" />\r\n      <option name=\"MODULE_MODE\" value=\"false\" />\r\n      <option name=\"REDIRECT_INPUT\" value=\"false\" />\r\n      <option name=\"INPUT_FILE\" value=\"\" />\r\n      <method v=\"2\" />\r\n    </configuration>\r\n    <recent_temporary>\r\n      <list>\r\n        <item itemvalue=\"Python.data_collector_v5\" />\r\n      </list>\r\n    </recent_temporary>\r\n  </component>\r\n  <component name=\"SharedIndexes\">\r\n    <attachedChunks>\r\n      <set>\r\n        <option value=\"bundled-js-predefined-d6986cc7102b-9b0f141eb926-JavaScript-PY-253.29346.142\" />\r\n        <option value=\"bundled-python-sdk-f2b7a9f6281b-6e1f45a539f7-com.jetbrains.pycharm.pro.sharedIndexes.bundled-PY-253.29346.142\" />\r\n      </set>\r\n    </attachedChunks>\r\n  </component>\r\n  <component name=\"SpellCheckerSettings\" RuntimeDictionaries=\"0\" Folders=\"0\" CustomDictionaries=\"0\" DefaultDictionary=\"application-level\" UseSingleDictionary=\"true\" transferred=\"true\" />\r\n  <component name=\"TaskManager\">\r\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\r\n      <changelist id=\"85089f33-9993-4c98-ac18-4c5ff11dcd04\" name=\"Changes\" comment=\"\" />\r\n      <created>1730576169599</created>\r\n      <option name=\"number\" value=\"Default\" />\r\n      <option name=\"presentableId\" value=\"Default\" />\r\n      <updated>1730576169599</updated>\r\n      <workItem from=\"1730576171275\" duration=\"848000\" />\r\n      <workItem from=\"1730577034925\" duration=\"6532000\" />\r\n      <workItem from=\"1766018570811\" duration=\"2964000\" />\r\n      <workItem from=\"1766021730839\" duration=\"14850000\" />\r\n      <workItem from=\"1766080851902\" duration=\"900000\" />\r\n      <workItem from=\"1766111641798\" duration=\"3136000\" />\r\n    </task>\r\n    <task id=\"LOCAL-00001\" summary=\"initial commit\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1730576663840</created>\r\n      <option name=\"number\" value=\"00001\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00001\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1730576663840</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00002\" summary=\"initial commit\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1730577130517</created>\r\n      <option name=\"number\" value=\"00002\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00002\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1730577130517</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00003\" summary=\"initial commit\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1766020804126</created>\r\n      <option name=\"number\" value=\"00003\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00003\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1766020804126</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00004\" summary=\"initial commit\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1766022963805</created>\r\n      <option name=\"number\" value=\"00004\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00004\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1766022963805</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00005\" summary=\"initial commit\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1766023228156</created>\r\n      <option name=\"number\" value=\"00005\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00005\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1766023228156</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00006\" summary=\"successful training\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1766027356805</created>\r\n      <option name=\"number\" value=\"00006\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00006\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1766027356805</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00007\" summary=\"successful training\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1766029584973</created>\r\n      <option name=\"number\" value=\"00007\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00007\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1766029584973</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00008\" summary=\"successful training\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1766034301499</created>\r\n      <option name=\"number\" value=\"00008\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00008\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1766034301499</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00009\" summary=\"Heteroscedasticity\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1766036434299</created>\r\n      <option name=\"number\" value=\"00009\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00009\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1766036434299</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00010\" summary=\"Rigor\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1766037968904</created>\r\n      <option name=\"number\" value=\"00010\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00010\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1766037968904</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00011\" summary=\"Rigor Success\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1766038477988</created>\r\n      <option name=\"number\" value=\"00011\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00011\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1766038477988</updated>\r\n    </task>\r\n    <option name=\"localTasksCounter\" value=\"12\" />\r\n    <servers />\r\n  </component>\r\n  <component name=\"TypeScriptGeneratedFilesManager\">\r\n    <option name=\"version\" value=\"3\" />\r\n  </component>\r\n  <component name=\"VcsManagerConfiguration\">\r\n    <MESSAGE value=\"initial commit\" />\r\n    <MESSAGE value=\"successful training\" />\r\n    <MESSAGE value=\"Heteroscedasticity\" />\r\n    <MESSAGE value=\"Rigor\" />\r\n    <MESSAGE value=\"Rigor Success\" />\r\n    <option name=\"LAST_COMMIT_MESSAGE\" value=\"Rigor Success\" />\r\n  </component>\r\n  <component name=\"XDebuggerManager\">\r\n    <breakpoint-manager>\r\n      <breakpoints>\r\n        <line-breakpoint enabled=\"true\" suspend=\"THREAD\" type=\"python-line\">\r\n          <url>file://$PROJECT_DIR$/src/model/train_v5.py</url>\r\n          <line>1</line>\r\n          <option name=\"timeStamp\" value=\"1\" />\r\n        </line-breakpoint>\r\n      </breakpoints>\r\n    </breakpoint-manager>\r\n  </component>\r\n  <component name=\"com.intellij.coverage.CoverageDataManagerImpl\">\r\n    <SUITE FILE_PATH=\"coverage/KRNN$main_pipeline.coverage\" NAME=\"main_pipeline Coverage Results\" MODIFIED=\"1766114687061\" SOURCE_PROVIDER=\"com.intellij.coverage.DefaultCoverageFileProvider\" RUNNER=\"coverage.py\" COVERAGE_BY_TEST_ENABLED=\"false\" COVERAGE_TRACING_ENABLED=\"false\" WORKING_DIRECTORY=\"$PROJECT_DIR$\" />\r\n    <SUITE FILE_PATH=\"coverage/KRNN$data_collector_v5.coverage\" NAME=\"data_collector_v5 Coverage Results\" MODIFIED=\"1766022523526\" SOURCE_PROVIDER=\"com.intellij.coverage.DefaultCoverageFileProvider\" RUNNER=\"coverage.py\" COVERAGE_BY_TEST_ENABLED=\"false\" COVERAGE_TRACING_ENABLED=\"false\" WORKING_DIRECTORY=\"$PROJECT_DIR$/src/data\" />\r\n    <SUITE FILE_PATH=\"coverage/KRNN$generate_report.coverage\" NAME=\"generate_report Coverage Results\" MODIFIED=\"1766114578989\" SOURCE_PROVIDER=\"com.intellij.coverage.DefaultCoverageFileProvider\" RUNNER=\"coverage.py\" COVERAGE_BY_TEST_ENABLED=\"false\" COVERAGE_TRACING_ENABLED=\"false\" WORKING_DIRECTORY=\"$PROJECT_DIR$/src/utils\" />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/workspace.xml b/.idea/workspace.xml
--- a/.idea/workspace.xml	(revision 329547708e54be771f49b01ee5ffae475180e260)
+++ b/.idea/workspace.xml	(date 1766202949438)
@@ -4,7 +4,7 @@
     <option name="autoReloadType" value="SELECTIVE" />
   </component>
   <component name="ChangeListManager">
-    <list default="true" id="85089f33-9993-4c98-ac18-4c5ff11dcd04" name="Changes" comment="Rigor Success">
+    <list default="true" id="85089f33-9993-4c98-ac18-4c5ff11dcd04" name="Changes" comment="Finalizing">
       <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/main_pipeline.py" beforeDir="false" afterPath="$PROJECT_DIR$/main_pipeline.py" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/src/utils/generate_report.py" beforeDir="false" afterPath="$PROJECT_DIR$/src/utils/generate_report.py" afterDir="false" />
@@ -131,7 +131,7 @@
       <workItem from="1766018570811" duration="2964000" />
       <workItem from="1766021730839" duration="14850000" />
       <workItem from="1766080851902" duration="900000" />
-      <workItem from="1766111641798" duration="3136000" />
+      <workItem from="1766111641798" duration="5507000" />
     </task>
     <task id="LOCAL-00001" summary="initial commit">
       <option name="closed" value="true" />
@@ -221,7 +221,15 @@
       <option name="project" value="LOCAL" />
       <updated>1766038477988</updated>
     </task>
-    <option name="localTasksCounter" value="12" />
+    <task id="LOCAL-00012" summary="Finalizing">
+      <option name="closed" value="true" />
+      <created>1766115981014</created>
+      <option name="number" value="00012" />
+      <option name="presentableId" value="LOCAL-00012" />
+      <option name="project" value="LOCAL" />
+      <updated>1766115981014</updated>
+    </task>
+    <option name="localTasksCounter" value="13" />
     <servers />
   </component>
   <component name="TypeScriptGeneratedFilesManager">
@@ -233,7 +241,8 @@
     <MESSAGE value="Heteroscedasticity" />
     <MESSAGE value="Rigor" />
     <MESSAGE value="Rigor Success" />
-    <option name="LAST_COMMIT_MESSAGE" value="Rigor Success" />
+    <MESSAGE value="Finalizing" />
+    <option name="LAST_COMMIT_MESSAGE" value="Finalizing" />
   </component>
   <component name="XDebuggerManager">
     <breakpoint-manager>
@@ -247,8 +256,8 @@
     </breakpoint-manager>
   </component>
   <component name="com.intellij.coverage.CoverageDataManagerImpl">
-    <SUITE FILE_PATH="coverage/KRNN$main_pipeline.coverage" NAME="main_pipeline Coverage Results" MODIFIED="1766114687061" SOURCE_PROVIDER="com.intellij.coverage.DefaultCoverageFileProvider" RUNNER="coverage.py" COVERAGE_BY_TEST_ENABLED="false" COVERAGE_TRACING_ENABLED="false" WORKING_DIRECTORY="$PROJECT_DIR$" />
+    <SUITE FILE_PATH="coverage/KRNN$main_pipeline.coverage" NAME="main_pipeline Coverage Results" MODIFIED="1766119754426" SOURCE_PROVIDER="com.intellij.coverage.DefaultCoverageFileProvider" RUNNER="coverage.py" COVERAGE_BY_TEST_ENABLED="false" COVERAGE_TRACING_ENABLED="false" WORKING_DIRECTORY="$PROJECT_DIR$" />
     <SUITE FILE_PATH="coverage/KRNN$data_collector_v5.coverage" NAME="data_collector_v5 Coverage Results" MODIFIED="1766022523526" SOURCE_PROVIDER="com.intellij.coverage.DefaultCoverageFileProvider" RUNNER="coverage.py" COVERAGE_BY_TEST_ENABLED="false" COVERAGE_TRACING_ENABLED="false" WORKING_DIRECTORY="$PROJECT_DIR$/src/data" />
-    <SUITE FILE_PATH="coverage/KRNN$generate_report.coverage" NAME="generate_report Coverage Results" MODIFIED="1766114578989" SOURCE_PROVIDER="com.intellij.coverage.DefaultCoverageFileProvider" RUNNER="coverage.py" COVERAGE_BY_TEST_ENABLED="false" COVERAGE_TRACING_ENABLED="false" WORKING_DIRECTORY="$PROJECT_DIR$/src/utils" />
+    <SUITE FILE_PATH="coverage/KRNN$generate_report.coverage" NAME="generate_report Coverage Results" MODIFIED="1766120185959" SOURCE_PROVIDER="com.intellij.coverage.DefaultCoverageFileProvider" RUNNER="coverage.py" COVERAGE_BY_TEST_ENABLED="false" COVERAGE_TRACING_ENABLED="false" WORKING_DIRECTORY="$PROJECT_DIR$/src/utils" />
   </component>
 </project>
\ No newline at end of file
